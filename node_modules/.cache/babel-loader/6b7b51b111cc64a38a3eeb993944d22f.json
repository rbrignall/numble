{"ast":null,"code":"import { useRef, useEffect } from 'react';\nimport { useIsoMorphicEffect } from './use-iso-morphic-effect.esm.js';\n\nfunction useTreeWalker(_ref) {\n  var container = _ref.container,\n      accept = _ref.accept,\n      walk = _ref.walk,\n      _ref$enabled = _ref.enabled,\n      enabled = _ref$enabled === void 0 ? true : _ref$enabled;\n  var acceptRef = useRef(accept);\n  var walkRef = useRef(walk);\n  useEffect(function () {\n    acceptRef.current = accept;\n    walkRef.current = walk;\n  }, [accept, walk]);\n  useIsoMorphicEffect(function () {\n    if (!container) return;\n    if (!enabled) return;\n    var accept = acceptRef.current;\n    var walk = walkRef.current;\n    var acceptNode = Object.assign(function (node) {\n      return accept(node);\n    }, {\n      acceptNode: accept\n    });\n    var walker = document.createTreeWalker(container, NodeFilter.SHOW_ELEMENT, acceptNode, false);\n\n    while (walker.nextNode()) {\n      walk(walker.currentNode);\n    }\n  }, [container, enabled, acceptRef, walkRef]);\n}\n\nexport { useTreeWalker };","map":{"version":3,"sources":["/Users/rbrignall/Documents/GitHub/numble/node_modules/@headlessui/react/src/hooks/use-tree-walker.ts"],"names":["useTreeWalker","container","accept","walk","enabled","acceptRef","useRef","walkRef","useEffect","useIsoMorphicEffect","acceptNode","walker","document","NodeFilter"],"mappings":";;;SAUgBA,a,CAAAA,I,EAAAA;MACdC,SAAAA,GAAAA,IAAAA,CAAAA,S;MACAC,MAAAA,GAAAA,IAAAA,CAAAA,M;MACAC,IAAAA,GAAAA,IAAAA,CAAAA,I;0BACAC,O;MAAAA,OAAAA,GAAAA,YAAAA,KAAAA,KAAAA,CAAAA,GAAU,IAAVA,GAAU,Y;AAOV,MAAIC,SAAS,GAAGC,MAAM,CAAtB,MAAsB,CAAtB;AACA,MAAIC,OAAO,GAAGD,MAAM,CAApB,IAAoB,CAApB;AAEAE,EAAAA,SAAS,CAAC,YAAA;AACRH,IAAAA,SAAS,CAATA,OAAAA,GAAAA,MAAAA;AACAE,IAAAA,OAAO,CAAPA,OAAAA,GAAAA,IAAAA;AAFO,GAAA,EAGN,CAAA,MAAA,EAHHC,IAGG,CAHM,CAATA;AAKAC,EAAAA,mBAAmB,CAAC,YAAA;AAClB,QAAI,CAAJ,SAAA,EAAgB;AAChB,QAAI,CAAJ,OAAA,EAAc;AAEd,QAAIP,MAAM,GAAGG,SAAS,CAAtB,OAAA;AACA,QAAIF,IAAI,GAAGI,OAAO,CAAlB,OAAA;AAEA,QAAIG,UAAU,GAAG,MAAM,CAAN,MAAA,CAAc,UAAA,IAAA,EAAA;AAAA,aAAuBR,MAAM,CAA7B,IAA6B,CAA7B;AAAd,KAAA,EAAmD;AAAEQ,MAAAA,UAAU,EAAER;AAAd,KAAnD,CAAjB;AACA,QAAIS,MAAM,GAAGC,QAAQ,CAARA,gBAAAA,CAAAA,SAAAA,EAAqCC,UAAU,CAA/CD,YAAAA,EAAAA,UAAAA,EAAb,KAAaA,CAAb;;AAEA,WAAOD,MAAM,CAAb,QAAOA,EAAP,EAAA;AAA0BR,MAAAA,IAAI,CAACQ,MAAM,CAAXR,WAAI,CAAJA;AAA1B;AAViB,GAAA,EAWhB,CAAA,SAAA,EAAA,OAAA,EAAA,SAAA,EAXHM,OAWG,CAXgB,CAAnBA;AAYD","sourcesContent":["import { useRef, useEffect } from 'react'\nimport { useIsoMorphicEffect } from './use-iso-morphic-effect'\n\ntype AcceptNode = (\n  node: HTMLElement\n) =>\n  | typeof NodeFilter.FILTER_ACCEPT\n  | typeof NodeFilter.FILTER_SKIP\n  | typeof NodeFilter.FILTER_REJECT\n\nexport function useTreeWalker({\n  container,\n  accept,\n  walk,\n  enabled = true,\n}: {\n  container: HTMLElement | null\n  accept: AcceptNode\n  walk(node: HTMLElement): void\n  enabled?: boolean\n}) {\n  let acceptRef = useRef(accept)\n  let walkRef = useRef(walk)\n\n  useEffect(() => {\n    acceptRef.current = accept\n    walkRef.current = walk\n  }, [accept, walk])\n\n  useIsoMorphicEffect(() => {\n    if (!container) return\n    if (!enabled) return\n\n    let accept = acceptRef.current\n    let walk = walkRef.current\n\n    let acceptNode = Object.assign((node: HTMLElement) => accept(node), { acceptNode: accept })\n    let walker = document.createTreeWalker(container, NodeFilter.SHOW_ELEMENT, acceptNode, false)\n\n    while (walker.nextNode()) walk(walker.currentNode as HTMLElement)\n  }, [container, enabled, acceptRef, walkRef])\n}\n"]},"metadata":{},"sourceType":"module"}